%!!!!!!!!!!!!!!!!!!!!!!!!!!!!              !!!!!!!!!!!!!!!!!!!!!!!!!!!!
%!!!!!!!!!!!!!!!!!!!!!!!!!!!!   Packages   !!!!!!!!!!!!!!!!!!!!!!!!!!!!
%!!!!!!!!!!!!!!!!!!!!!!!!!!!!              !!!!!!!!!!!!!!!!!!!!!!!!!!!!

% polices
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage[french]{babel}
\frenchbsetup{StandardLists=true}
\usepackage{amssymb}
\usepackage{xspace}
\usepackage{xcolor}

% passage en cmr pour les petites capitales grasses
\rmfamily
\DeclareFontShape{T1}{lmr}{b}{sc}{<->ssub*cmr/bx/sc}{}
\DeclareFontShape{T1}{lmr}{bx}{sc}{<->ssub*cmr/bx/sc}{}

% mise en page
\ifmentiondeprotection
	\usepackage[left=3cm,right=2cm,top=2.5cm,bottom=3.5cm,
		headheight=80pt]{geometry}
\else
	\usepackage[left=3cm,right=2cm,top=2.5cm,bottom=3.5cm]{geometry}
\fi
\usepackage{fancyhdr}
\usepackage{tocvsec2}
\usepackage[nottoc]{tocbibind}

\usepackage{titlesec}
\titleformat{\chapter}[hang]
{\normalfont\huge\bfseries}{\chaptertitlename\ \thechapter:}{1em}{}

% texte
\usepackage{soulutf8}				% souligner
\usepackage{boxedminipage}
\usepackage{eurosym}			% symbole euro
\usepackage{enumitem}

\newcommand*{\escape}[1]{\texttt{\textbackslash#1}}

% tableaux et images
\usepackage{graphicx}
\usepackage{array}
\usepackage{float}

%glossaire
%\usepackage[xindy,nonumberlist,toc,nopostdot,style=altlist,nogroupskip]{glossaries}
%\makeglossaries

% citations
\usepackage[urlcolor=blue,   	% Liens vers une page web
            linkcolor=black, 	% Liens internes au document
			citecolor=black,	% Liens vers la biblio
            colorlinks=true]{hyperref}


% maths
\usepackage{mathtools,amssymb,amsthm,mathrsfs}

% code informatique
\usepackage{listings}
\definecolor{mGreen}{rgb}{0,0.6,0}
\definecolor{mGray}{rgb}{0.5,0.5,0.5}
\definecolor{mPurple}{rgb}{0.58,0,0.82}
\definecolor{backgroundColour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{CStyle}{
    backgroundcolor=\color{backgroundColour},
    commentstyle=\color{mGreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{mGray},
    stringstyle=\color{mPurple},
    basicstyle=\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    language=C
}

% nouvelles commandes
\usepackage{calc,xspace}



% dessin
\usepackage{msc}
\drawframe{no}

%!!!!!!!!!!!!!!!!!!!!                               !!!!!!!!!!!!!!!!!!!!
%!!!!!!!!!!!!!!!!!!!!   Commandes de presentation   !!!!!!!!!!!!!!!!!!!!
%!!!!!!!!!!!!!!!!!!!!                               !!!!!!!!!!!!!!!!!!!!

% metadonnees du PDF
\hypersetup{
    pdfauthor={\auteur},
    pdftitle={\sujetmetadonnees},
    pdfsubject={\descriptionsujet},
    pdfkeywords={\motsclef}
}


% mention de protection
\newcommand{\mentiondeprotection}{{%
	\bfseries\sffamily\large
	\setlength{\fboxrule}{0.6mm}%
	\setlength{\fboxsep}{2.5mm}%
	\begin{tabular}{@{}>{\raggedleft}p{0.5\linewidth-0.25cm}
		@{\hspace{0.5cm}}
		>{\raggedright}p{0.5\linewidth-0.25cm}@{}}
	\textcolor{red}{\fbox{\mention}}
	&\textcolor{blue}{\fbox{\protection}}
	\end{tabular}
}}

% titres courants et pieds de page
\pagestyle{fancy}

% page paire (even, E)
\fancyhead[RE]{}
\ifmentiondeprotection
	\fancyhead[CE]{\null\vspace*{51pt}\mentiondeprotection\vspace*{-51pt} \vspace{5pt} \newline}
\else
	\fancyhead[CE]{}
\fi
\fancyhead[LE]{\nouppercase{\leftmark}}

% page impaire (odd, O)
\fancyhead[RO]{Promotion ESSI \annee}
\ifmentiondeprotection
	\fancyhead[CO]{\null\vspace*{51pt}\mentiondeprotection\vspace*{-51pt} \vspace{5pt} \newline}
\else
	\fancyhead[CO]{}
\fi
\fancyhead[LO]{\auteur}

% pied de page
\ifmentiondeprotection
	\fancyfoot[C]{\mentiondeprotection \vspace{5pt} \newline \thepage}
\else
	\fancyfoot[C]{\thepage}
\fi

% package tikz
\usepackage{tikz}
\usetikzlibrary{shapes,arrows,chains,shapes.geometric}

%%%<
%\usepackage{verbatim}
%\usepackage[active,tightpage]{preview}
%\PreviewEnvironment{tikzpicture}
%\setlength\PreviewBorder{5mm}%
%%%>

% backslash
\newcommand\SLASH{\char`\\}

% premieres pages de chapitres
\ifmentiondeprotection
	\fancypagestyle{plain}{
		\renewcommand{\headrulewidth}{0cm}
		\fancyhead[C]{\null\vspace*{51pt}\mentiondeprotection\vspace*{-51pt} \vspace{5pt} \newline}
		\fancyhead[L,R]{}
		\fancyfoot[C]{\mentiondeprotection \vspace{5pt} \newline \thepage}
		\fancyfoot[L,R]{}
	}
\fi

%!!!!!!!!!!!!!!!!!!!                                !!!!!!!!!!!!!!!!!!!
%!!!!!!!!!!!!!!!!!!!   Vos commandes personnelles   !!!!!!!!!!!!!!!!!!!
%!!!!!!!!!!!!!!!!!!!                                !!!!!!!!!!!!!!!!!!!




